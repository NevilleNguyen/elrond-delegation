import{a as E}from"./chunk-JX5SSSLF.js";import{c as B,d as m}from"./chunk-G3PZHPKZ.js";import{a as A}from"./chunk-B6PGANAK.js";import{d as M}from"./chunk-EV2NV6KZ.js";import{b as w}from"./chunk-JLY4442Z.js";import{a as I}from"./chunk-24OJ7KCF.js";import{a as q}from"./chunk-OUEPJKUR.js";import{b as h}from"./chunk-D5D6AV6G.js";import{b,c as W}from"./chunk-XRCJ5PNU.js";import{c as u,e as R}from"./chunk-2AOPQAPV.js";import{o as U}from"./chunk-K2GW23ZC.js";import{a as l,b as T,j as g,m as y}from"./chunk-HBP5N4FR.js";y();import{useEffect as z,useRef as F}from"react";import{Address as G}from"@multiversx/sdk-core";import{Signature as J}from"@multiversx/sdk-core/out/signature";q();U();W();var P=c=>{let t=c.redirectRoute;t&&b(t)},mn=({sendSignedTransactionsAsync:c=A})=>{let t=m(w),n=m(M),r=F(!1),a=B(),S=()=>{a(R()),r.current=!1};function j(){return g(this,null,function*(){var f;let k=Object.keys(n);for(let e of k){let o=n==null?void 0:n[e],x=(f=o==null?void 0:o.customTransactionInformation)==null?void 0:f.signWithoutSending;if(!e||x){P(o);continue}try{if(!(n[e].status==="signed"&&!r.current))continue;let{transactions:i}=n[e];if(!i)continue;r.current=!0;let C=i.map(s=>{let H=new G(s.sender),p=I(s),N=new J(s.signature);return p.applySignature(N,H),p}),O=yield c(C),v="pending",D=i.map(s=>O.includes(s.hash)?T(l({},s),{status:v}):s);a(h({sessionId:e,submittedMessage:"submitted"})),a(u({sessionId:e,status:"sent",transactions:D})),S(),E(t.nonce+i.length),P(o),history.pushState({},document==null?void 0:document.title,"?")}catch(d){console.error("Unable to send transactions",d),a(u({sessionId:e,status:"fail",errorMessage:d.message})),S()}finally{r.current=!1}}})}return z(()=>{j()},[n,t]),null};export{mn as a};
//# sourceMappingURL=chunk-MU3IENP2.js.map
