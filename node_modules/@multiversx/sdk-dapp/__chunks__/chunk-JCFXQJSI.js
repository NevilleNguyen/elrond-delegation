import{a as I}from"./chunk-RRQEQ76C.js";import{b as e}from"./chunk-FEEPN2KN.js";import{a as E}from"./chunk-5BCRD2HN.js";import{a as b}from"./chunk-QLWST6HJ.js";import{a as H}from"./chunk-OX2QPQSJ.js";import{a as B}from"./chunk-H6OKWNQL.js";import{b as i}from"./chunk-GCUT2XXY.js";import{a as W}from"./chunk-TXAITGIS.js";import{b as T}from"./chunk-M263BCY6.js";import{a as y,j as S,m as s}from"./chunk-HBP5N4FR.js";s();import t,{useEffect as V,useState as fe}from"react";import{faCircleNotch as pe}from"@fortawesome/free-solid-svg-icons";import n from"classnames";import xe from"qrcode";s();import*as r from"react";var ge=m=>r.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 31.114 44.981",width:16,height:16},m),r.createElement("g",{transform:"translate(-47.168 -21.519)"},r.createElement("g",{transform:"translate(-247.872 -130.693)"},r.createElement("path",{d:"M355.676,152.213l-3.832,17.8h-9.661Z",transform:"translate(-40.089 1)",fillRule:"evenodd",fill:"#fff"}),r.createElement("path",{d:"M326.45,271.184l-7.053,9.379H295.04l7.054-9.379Z",transform:"translate(0 -101.17)",fillRule:"evenodd",fill:"#fff"}),r.createElement("path",{d:"M381.139,333.864l-13.493,17.8,3.832-17.8Z",transform:"translate(-61.742 -155.472)",fillRule:"evenodd",fill:"#fff"})))),A=ge;var Ie=({callbackRoute:m,loginButtonText:Q="xPortal App",title:k="Login with the xPortal App",logoutRoute:D="/unlock",className:C="dapp-wallet-connect-login-modal",lead:z="Scan the QR code using the xPortal App",wrapContentInsideModal:Z=!0,token:g,nativeAuth:_,onClose:d,onLoginRedirect:O,innerWalletConnectComponentsClasses:U,customSpinnerComponent:f,showScamPhishingAlert:p=!0})=>{var P;let[q,{error:x},{connectExisting:X,removeExistingPairing:j,cancelLogin:F,uriDeepLink:G,walletConnectUri:c,wcPairings:l}]=T({logoutRoute:D,callbackRoute:m,token:g,nativeAuth:_,onLoginRedirect:O}),[u,J]=fe(""),{containerContentClassName:K,containerScamPhishingAlertClassName:Y,containerTitleClassName:$,containerSubtitleClassName:R,containerErrorClassName:ee,containerQrCodeClassName:te,containerLoaderClassName:oe,containerButtonClassName:ne,walletConnectPairingListClassNames:ae}=U||{},re=W(),h=(P=l==null?void 0:l.filter(o=>{let me=l.some(a=>{var N,M,w,L;return((N=o.peerMetadata)==null?void 0:N.name)===((M=a==null?void 0:a.peerMetadata)==null?void 0:M.name)&&((w=o.peerMetadata)==null?void 0:w.url)===((L=a==null?void 0:a.peerMetadata)==null?void 0:L.url)&&o.expiry<a.expiry});return Boolean(o.active)&&o.peerMetadata&&!me}))!=null?P:[],le=()=>S(void 0,null,function*(){if(!c)return;let o=yield xe.toString(c,{type:"svg"});o&&J(o)}),se=()=>{F(),d==null||d()};V(()=>{le()},[c]),V(()=>{q()},[]);let ie=p?B(g):void 0,v=t.createElement(t.Fragment,null,p&&t.createElement(E,{url:window==null?void 0:window.location.origin,authorizationInfo:ie,className:Y}),t.createElement("div",{className:n(e.xPortalContent,K)},t.createElement("div",{className:n(e.xPortalContainerHeading,$)},k),t.createElement("div",{className:n(e.xPortalContainerSubheading,R)},z),t.createElement("div",null,x&&t.createElement("p",{className:n(e.xPortalContainerError,ee)},x)),u?t.createElement("div",{className:n(e.xPortalQrCode,te),dangerouslySetInnerHTML:{__html:u}}):t.createElement("div",{className:n(e.xPortalLoader,oe)},f||t.createElement(H,{iconSize:"10x",icon:pe,iconClass:n("fa-spin",i.textPrimary)})),re&&t.createElement("a",{id:"accessWalletBtn","data-testid":"accessWalletBtn",href:G,rel:"noopener noreferrer nofollow",target:"_blank",className:n(i.btn,i.btnPrimary,e.xPortalContainerButton,ne)},t.createElement(A,{className:e.xPortalContainerButtonIcon}),Q),h.length>0&&t.createElement(I,{activePairings:h,connectExisting:X,removeExistingPairing:j,className:C,pairingListClasses:ae})));return Z?t.createElement(b,{onClose:se,modalConfig:{headerText:"Login using the xPortal App",showHeader:!0,modalContentClassName:e.xPortalModalDialogContent,modalHeaderClassName:e.xPortalModalHeader,modalHeaderTextClassName:e.xPortalModalHeaderText,modalCloseButtonClassName:e.xPortalModalCloseButton,modalBodyClassName:e.xPortalModalBody,modalDialogClassName:e.xPortalLoginContainer},className:C},v):v};export{Ie as a};
//# sourceMappingURL=chunk-JCFXQJSI.js.map
