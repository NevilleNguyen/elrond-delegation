import{b as p}from"./chunk-3SYOVVPU.js";import{c as g,d}from"./chunk-XAQNBFSL.js";import{a as i,b as M}from"./chunk-HSUU5363.js";import{a as F}from"./chunk-6XR6BLIB.js";import{a as I}from"./chunk-HGOHQNWK.js";import{m as x}from"./chunk-HBP5N4FR.js";x();F();import l,{useEffect as V,useMemo as W,useRef as T}from"react";import w from"classnames";M();var c="toastProgress",Y=({id:a,children:R,progress:s,done:b,expiresIn:h=10*60,className:N="dapp-progress",isCrossShard:v=!1})=>{let{currentRemaining:E,totalSeconds:P}=W(()=>{let r=(i.session.getItem(c)||{})[a],t=s?s.endTime-s.startTime:0;return{currentRemaining:r||100,totalSeconds:t}},[]),o=T(null),m=T(),n=T(E);V(()=>{if(s!=null)return b?_():A(),()=>{clearInterval(m.current)}},[s,b]);function y(){let e=i.session.getItem(c);!Boolean(e==null?void 0:e[a])||(delete e[a],S(e))}function f(e){let r=i.session.getItem(c)||{};r[a]=e,S(r)}function S(e){i.session.setItem({key:c,data:e,expires:I(h)})}function _(){if(n.current<100){u(0);return}m.current=setInterval(()=>{if(o.current==null)return;let r=n.current-1;r<=0?(clearInterval(m.current),y(),u(0)):(f(r),u(r))},g)}function A(){if((i.session.getItem(c)||{})[a]===n.current){let t=d({remaining:n.current,totalSeconds:P,isCrossShard:v});u(t),f(t)}m.current=setInterval(()=>{if(o.current==null)return;let t=d({remaining:n.current,totalSeconds:P,isCrossShard:v});f(t),u(t)},g)}function u(e){n.current=e,O()}function O(){if(o.current==null)return;let e=n.current;o.current.style.width=`${e}%`,o.current.ariaValueNow=e}return s?l.createElement("div",{className:w(p.progress,N)},l.createElement("div",{ref:o,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,className:p.bar}),R):l.createElement(l.Fragment,null,R)};export{Y as a};
//# sourceMappingURL=chunk-PO7P2NDG.js.map
