import{a as U}from"./chunk-27M6NKGP.js";import{a as W}from"./chunk-KVVBB443.js";import{a as k}from"./chunk-XNZGF3PO.js";import{c as T}from"./chunk-5V4KCOPF.js";import{c as w,d as y}from"./chunk-G3PZHPKZ.js";import{h as u}from"./chunk-7RNOZDML.js";import{a as G}from"./chunk-OUEPJKUR.js";import{g as f}from"./chunk-3LKAAPJM.js";import{h as d,i as F}from"./chunk-QR72MI4M.js";import{a as g,b as p,j as m,m as L}from"./chunk-HBP5N4FR.js";L();F();import{useState as b}from"react";G();var ee=({callbackRoute:t,token:I,nativeAuth:i,redirectDelayMilliseconds:S=100})=>{let[r,h]=b(""),[v,s]=b(!1),P=y(u),R=w(),a=W(),x=Boolean(i),l=k(i),e=I;function D(){return m(this,null,function*(){if(a)throw new Error(d);try{s(!0);let o=T(P.walletAddress),c=new Date,O=c.setMinutes(c.getMinutes()+3)/1e3,E={data:{},expires:O};if(x&&!e&&(e=yield l.getNativeAuthLoginToken(),!e)){console.warn("Login cancelled.");return}e&&l.setLoginToken(e);let C=window!=null&&window.location?`${window.location.origin}${t}`:`${t}`;new URLSearchParams(document.location.search).get("address")||R(f(E));let M=U(C),N=encodeURIComponent(M),A=p(g({callbackUrl:N},e&&{token:e}),{redirectDelayMilliseconds:S});yield o.login(A)}catch(o){console.error(o),h("error logging in"+o.message)}finally{s(!1)}})}let n=Boolean(r);return[D,{error:r,loginFailed:n,isLoading:v&&!n,isLoggedIn:a&&!n}]};export{ee as a};
//# sourceMappingURL=chunk-EFJVIBBH.js.map
