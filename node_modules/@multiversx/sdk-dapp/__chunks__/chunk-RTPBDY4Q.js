import{b as t}from"./chunk-3SGZP5CP.js";import{a}from"./chunk-YZC6D7ZZ.js";import{a as l}from"./chunk-YAR2KJ42.js";import{a as m}from"./chunk-KZR7TQ7H.js";import{a as u}from"./chunk-JHW32CXC.js";import{c as i}from"./chunk-G3PZHPKZ.js";import{a as C}from"./chunk-OUEPJKUR.js";import{l as c}from"./chunk-LHCY2HW6.js";import{j as n,m as s}from"./chunk-HBP5N4FR.js";s();import{useCallback as b,useEffect as f,useRef as d}from"react";import{io as A}from"socket.io-client";C();var I=3e3,w=3,M=500,R=1e3;function z(){let o=d(null),{address:r}=u(),E=i(),{network:T}=a(),p=e=>{o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{E(c(e))},R)},k=b(m(()=>n(this,null,function*(){t.status="pending";let e=yield l(T.apiAddress);if(e==null){console.warn("Can not get websocket url");return}t.current=A(e,{forceNew:!0,reconnectionAttempts:w,timeout:I,query:{address:r}}),t.status="completed",t.current.onAny(N=>{p(N)})}),{retries:2,delay:M}),[r]);f(()=>{r&&t.status==="not_initialized"&&!t.current&&k()},[r,t.current]),f(()=>()=>{var e;(e=t.current)==null||e.close(),o.current&&clearTimeout(o.current)},[])}export{z as a};
//# sourceMappingURL=chunk-RTPBDY4Q.js.map
