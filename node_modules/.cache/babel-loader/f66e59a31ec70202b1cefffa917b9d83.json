{"ast":null,"code":"import _defineProperty from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/neville/Documents/Github/elrond-delegation/src/components/Stake/components/Undelegate/Undelegate.tsx\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useGetActiveTransactionsStatus } from '@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';\nimport classNames from 'classnames';\nimport { Formik } from 'formik';\nimport { object } from 'yup';\nimport { Action, Submit } from 'components/Action';\nimport { undelegateValidator } from 'components/Stake//helpers/delegationValidators';\nimport useStakeData from 'components/Stake/hooks';\nimport { network } from 'config';\nimport { useGlobalContext } from 'context';\nimport { denominated } from 'helpers/denominate';\nimport styles from './styles.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var Undelegate = function Undelegate() {\n  _s();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    maxed = _useState2[0],\n    setMaxed = _useState2[1];\n  var _useGlobalContext = useGlobalContext(),\n    userActiveStake = _useGlobalContext.userActiveStake;\n  var _useStakeData = useStakeData(),\n    onUndelegate = _useStakeData.onUndelegate;\n  var _useGetActiveTransact = useGetActiveTransactionsStatus(),\n    pending = _useGetActiveTransact.pending;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classNames(styles.wrapper, 'undelegate-wrapper'),\n    children: /*#__PURE__*/_jsxDEV(Action, {\n      title: \"Undelegate Now\",\n      description: \"Select the amount of \".concat(network.egldLabel, \" you want to undelegate.\"),\n      disabled: pending,\n      trigger: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classNames(styles.trigger, _defineProperty({}, styles.disabled, pending)),\n        children: \"Undelegate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 11\n      }, _this),\n      render: function render(callback) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.undelegate,\n          children: /*#__PURE__*/_jsxDEV(Formik, {\n            validationSchema: object().shape({\n              amount: undelegateValidator(userActiveStake.data || '')\n            }),\n            onSubmit: onUndelegate(callback),\n            initialValues: {\n              amount: '0'\n            },\n            children: function children(_ref) {\n              var errors = _ref.errors,\n                values = _ref.values,\n                touched = _ref.touched,\n                handleChange = _ref.handleChange,\n                handleBlur = _ref.handleBlur,\n                handleSubmit = _ref.handleSubmit,\n                setFieldValue = _ref.setFieldValue;\n              var amount = denominated(userActiveStake.data || '', {\n                addCommas: false,\n                showLastNonZeroDecimal: true\n              });\n              var onChange = function onChange(event) {\n                handleChange(event);\n                setMaxed(false);\n              };\n              var onMax = function onMax(event) {\n                event.preventDefault();\n                setMaxed(true);\n                setFieldValue('amount', amount);\n              };\n              return /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleSubmit,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.field,\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"amount\",\n                    children: [network.egldLabel, \" Amount\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 23\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.group,\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      name: \"amount\",\n                      step: \"any\",\n                      required: true,\n                      autoComplete: \"off\",\n                      min: 0,\n                      value: maxed ? amount : values.amount,\n                      onBlur: handleBlur,\n                      onChange: onChange,\n                      className: classNames(styles.input, _defineProperty({}, styles.invalid, errors.amount && touched.amount))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 82,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"/#\",\n                      onClick: onMax,\n                      className: styles.max,\n                      children: \"Max\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 25\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 23\n                  }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: styles.description,\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Balance:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 103,\n                      columnNumber: 25\n                    }, _this), ' ', denominated(userActiveStake.data || ''), ' ', network.egldLabel]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 23\n                  }, _this), errors.amount && touched.amount && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: styles.error,\n                    children: errors.amount\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(Submit, {\n                  save: \"Continue\",\n                  onClose: function onClose() {\n                    setMaxed(false);\n                    setFieldValue('amount', '0');\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 19\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, _this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, _this);\n};\n_s(Undelegate, \"wuH5JvaZHYJnuJi4gUr1iLC8iiI=\", false, function () {\n  return [useGlobalContext, useStakeData, useGetActiveTransactionsStatus];\n});\n_c = Undelegate;\nvar _c;\n$RefreshReg$(_c, \"Undelegate\");","map":{"version":3,"names":["React","useState","useGetActiveTransactionsStatus","classNames","Formik","object","Action","Submit","undelegateValidator","useStakeData","network","useGlobalContext","denominated","styles","jsxDEV","_jsxDEV","Undelegate","_s","_useState","_useState2","_slicedToArray","maxed","setMaxed","_useGlobalContext","userActiveStake","_useStakeData","onUndelegate","_useGetActiveTransact","pending","className","wrapper","children","title","description","concat","egldLabel","disabled","trigger","_defineProperty","fileName","_jsxFileName","lineNumber","columnNumber","_this","render","callback","undelegate","validationSchema","shape","amount","data","onSubmit","initialValues","_ref","errors","values","touched","handleChange","handleBlur","handleSubmit","setFieldValue","addCommas","showLastNonZeroDecimal","onChange","event","onMax","preventDefault","field","htmlFor","group","type","name","step","required","autoComplete","min","value","onBlur","input","invalid","href","onClick","max","error","save","onClose","_c","$RefreshReg$"],"sources":["/Users/neville/Documents/Github/elrond-delegation/src/components/Stake/components/Undelegate/Undelegate.tsx"],"sourcesContent":["import React, { ChangeEvent, MouseEvent, useState } from 'react';\n\nimport { useGetActiveTransactionsStatus } from '@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';\nimport classNames from 'classnames';\nimport { Formik } from 'formik';\nimport { object } from 'yup';\nimport { Action, Submit } from 'components/Action';\nimport { undelegateValidator } from 'components/Stake//helpers/delegationValidators';\nimport useStakeData, { ActionCallbackType } from 'components/Stake/hooks';\nimport { network } from 'config';\nimport { useGlobalContext } from 'context';\n\nimport { denominated } from 'helpers/denominate';\n\nimport styles from './styles.module.scss';\n\nexport const Undelegate = () => {\n  const [maxed, setMaxed] = useState(false);\n\n  const { userActiveStake } = useGlobalContext();\n  const { onUndelegate } = useStakeData();\n  const { pending } = useGetActiveTransactionsStatus();\n\n  return (\n    <div className={classNames(styles.wrapper, 'undelegate-wrapper')}>\n      <Action\n        title='Undelegate Now'\n        description={`Select the amount of ${network.egldLabel} you want to undelegate.`}\n        disabled={pending}\n        trigger={\n          <div\n            className={classNames(styles.trigger, {\n              [styles.disabled]: pending\n            })}\n          >\n            Undelegate\n          </div>\n        }\n        render={(callback: ActionCallbackType) => (\n          <div className={styles.undelegate}>\n            <Formik\n              validationSchema={object().shape({\n                amount: undelegateValidator(userActiveStake.data || '')\n              })}\n              onSubmit={onUndelegate(callback)}\n              initialValues={{\n                amount: '0'\n              }}\n            >\n              {({\n                errors,\n                values,\n                touched,\n                handleChange,\n                handleBlur,\n                handleSubmit,\n                setFieldValue\n              }) => {\n                const amount = denominated(userActiveStake.data || '', {\n                  addCommas: false,\n                  showLastNonZeroDecimal: true\n                });\n\n                const onChange = (\n                  event: ChangeEvent<HTMLInputElement>\n                ): void => {\n                  handleChange(event);\n                  setMaxed(false);\n                };\n\n                const onMax = (event: MouseEvent): void => {\n                  event.preventDefault();\n                  setMaxed(true);\n                  setFieldValue('amount', amount);\n                };\n\n                return (\n                  <form onSubmit={handleSubmit}>\n                    <div className={styles.field}>\n                      <label htmlFor='amount'>{network.egldLabel} Amount</label>\n                      <div className={styles.group}>\n                        <input\n                          type='number'\n                          name='amount'\n                          step='any'\n                          required={true}\n                          autoComplete='off'\n                          min={0}\n                          value={maxed ? amount : values.amount}\n                          onBlur={handleBlur}\n                          onChange={onChange}\n                          className={classNames(styles.input, {\n                            [styles.invalid]: errors.amount && touched.amount\n                          })}\n                        />\n\n                        <a href='/#' onClick={onMax} className={styles.max}>\n                          Max\n                        </a>\n                      </div>\n\n                      <span className={styles.description}>\n                        <span>Balance:</span>{' '}\n                        {denominated(userActiveStake.data || '')}{' '}\n                        {network.egldLabel}\n                      </span>\n\n                      {errors.amount && touched.amount && (\n                        <span className={styles.error}>{errors.amount}</span>\n                      )}\n                    </div>\n\n                    <Submit\n                      save='Continue'\n                      onClose={() => {\n                        setMaxed(false);\n                        setFieldValue('amount', '0');\n                      }}\n                    />\n                  </form>\n                );\n              }}\n            </Formik>\n          </div>\n        )}\n      />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}