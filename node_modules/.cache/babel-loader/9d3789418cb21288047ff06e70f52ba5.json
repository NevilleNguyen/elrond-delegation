{"ast":null,"code":"import _regeneratorRuntime from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as U } from \"./chunk-27M6NKGP.js\";\nimport { a as W } from \"./chunk-KVVBB443.js\";\nimport { a as k } from \"./chunk-XNZGF3PO.js\";\nimport { c as T } from \"./chunk-5V4KCOPF.js\";\nimport { c as w, d as y } from \"./chunk-G3PZHPKZ.js\";\nimport { h as u } from \"./chunk-7RNOZDML.js\";\nimport { a as G } from \"./chunk-OUEPJKUR.js\";\nimport { g as f } from \"./chunk-3LKAAPJM.js\";\nimport { h as d, i as F } from \"./chunk-QR72MI4M.js\";\nimport { a as g, b as p, j as m, m as L } from \"./chunk-HBP5N4FR.js\";\nL();\nF();\nimport { useState as b } from \"react\";\nG();\nvar ee = function ee(_ref) {\n  var t = _ref.callbackRoute,\n    I = _ref.token,\n    i = _ref.nativeAuth,\n    _ref$redirectDelayMil = _ref.redirectDelayMilliseconds,\n    S = _ref$redirectDelayMil === void 0 ? 100 : _ref$redirectDelayMil;\n  var _b = b(\"\"),\n    _b2 = _slicedToArray(_b, 2),\n    r = _b2[0],\n    h = _b2[1],\n    _b3 = b(!1),\n    _b4 = _slicedToArray(_b3, 2),\n    v = _b4[0],\n    s = _b4[1],\n    P = y(u),\n    R = w(),\n    a = W(),\n    x = Boolean(i),\n    l = k(i),\n    e = I;\n  function D() {\n    return m(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var o, c, O, E, C, M, N, A;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!a) {\n              _context.next = 2;\n              break;\n            }\n            throw new Error(d);\n          case 2:\n            _context.prev = 2;\n            s(!0);\n            o = T(P.walletAddress), c = new Date(), O = c.setMinutes(c.getMinutes() + 3) / 1e3, E = {\n              data: {},\n              expires: O\n            };\n            _context.t0 = x && !e;\n            if (!_context.t0) {\n              _context.next = 11;\n              break;\n            }\n            _context.next = 9;\n            return l.getNativeAuthLoginToken();\n          case 9:\n            e = _context.sent;\n            _context.t0 = !e;\n          case 11:\n            if (!_context.t0) {\n              _context.next = 14;\n              break;\n            }\n            console.warn(\"Login cancelled.\");\n            return _context.abrupt(\"return\");\n          case 14:\n            e && l.setLoginToken(e);\n            C = window != null && window.location ? \"\".concat(window.location.origin).concat(t) : \"\".concat(t);\n            new URLSearchParams(document.location.search).get(\"address\") || R(f(E));\n            M = U(C), N = encodeURIComponent(M), A = p(g({\n              callbackUrl: N\n            }, e && {\n              token: e\n            }), {\n              redirectDelayMilliseconds: S\n            });\n            _context.next = 20;\n            return o.login(A);\n          case 20:\n            _context.next = 25;\n            break;\n          case 22:\n            _context.prev = 22;\n            _context.t1 = _context[\"catch\"](2);\n            console.error(_context.t1), h(\"error logging in\" + _context.t1.message);\n          case 25:\n            _context.prev = 25;\n            s(!1);\n            return _context.finish(25);\n          case 28:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[2, 22, 25, 28]]);\n    }));\n  }\n  var n = Boolean(r);\n  return [D, {\n    error: r,\n    loginFailed: n,\n    isLoading: v && !n,\n    isLoggedIn: a && !n\n  }];\n};\nexport { ee as a };","map":{"version":3,"names":["a","U","W","k","c","T","w","d","y","h","u","G","g","f","i","F","b","p","j","m","L","useState","ee","_ref","t","callbackRoute","I","token","nativeAuth","_ref$redirectDelayMil","redirectDelayMilliseconds","S","_b","_b2","_slicedToArray","r","_b3","_b4","v","s","P","R","x","Boolean","l","e","D","_regeneratorRuntime","mark","_callee","o","O","E","C","M","N","A","wrap","_callee$","_context","prev","next","Error","walletAddress","Date","setMinutes","getMinutes","data","expires","t0","getNativeAuthLoginToken","sent","console","warn","abrupt","setLoginToken","window","location","concat","origin","URLSearchParams","document","search","get","encodeURIComponent","callbackUrl","login","t1","error","message","finish","stop","n","loginFailed","isLoading","isLoggedIn"],"sources":["/Users/neville/Documents/Github/elrond-delegation/node_modules/@multiversx/sdk-dapp/__chunks__/chunk-EFJVIBBH.js"],"sourcesContent":["import{a as U}from\"./chunk-27M6NKGP.js\";import{a as W}from\"./chunk-KVVBB443.js\";import{a as k}from\"./chunk-XNZGF3PO.js\";import{c as T}from\"./chunk-5V4KCOPF.js\";import{c as w,d as y}from\"./chunk-G3PZHPKZ.js\";import{h as u}from\"./chunk-7RNOZDML.js\";import{a as G}from\"./chunk-OUEPJKUR.js\";import{g as f}from\"./chunk-3LKAAPJM.js\";import{h as d,i as F}from\"./chunk-QR72MI4M.js\";import{a as g,b as p,j as m,m as L}from\"./chunk-HBP5N4FR.js\";L();F();import{useState as b}from\"react\";G();var ee=({callbackRoute:t,token:I,nativeAuth:i,redirectDelayMilliseconds:S=100})=>{let[r,h]=b(\"\"),[v,s]=b(!1),P=y(u),R=w(),a=W(),x=Boolean(i),l=k(i),e=I;function D(){return m(this,null,function*(){if(a)throw new Error(d);try{s(!0);let o=T(P.walletAddress),c=new Date,O=c.setMinutes(c.getMinutes()+3)/1e3,E={data:{},expires:O};if(x&&!e&&(e=yield l.getNativeAuthLoginToken(),!e)){console.warn(\"Login cancelled.\");return}e&&l.setLoginToken(e);let C=window!=null&&window.location?`${window.location.origin}${t}`:`${t}`;new URLSearchParams(document.location.search).get(\"address\")||R(f(E));let M=U(C),N=encodeURIComponent(M),A=p(g({callbackUrl:N},e&&{token:e}),{redirectDelayMilliseconds:S});yield o.login(A)}catch(o){console.error(o),h(\"error logging in\"+o.message)}finally{s(!1)}})}let n=Boolean(r);return[D,{error:r,loginFailed:n,isLoading:v&&!n,isLoggedIn:a&&!n}]};export{ee as a};\n//# sourceMappingURL=chunk-EFJVIBBH.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}