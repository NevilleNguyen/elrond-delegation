{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _classCallCheck = require(\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ValidatorSigner = void 0;\nvar errors_1 = require(\"./errors\");\nvar validatorKeys_1 = require(\"./validatorKeys\");\n/**\n * Validator signer (BLS signer)\n */\nvar ValidatorSigner = /*#__PURE__*/function () {\n  function ValidatorSigner() {\n    _classCallCheck(this, ValidatorSigner);\n  }\n  _createClass(ValidatorSigner, [{\n    key: \"signUsingPem\",\n    value:\n    /**\n     * Signs a message.\n     */\n    function signUsingPem(pemText) {\n      var pemIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var signable = arguments.length > 2 ? arguments[2] : undefined;\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var secretKey;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return validatorKeys_1.BLS.initIfNecessary();\n            case 2:\n              _context.prev = 2;\n              secretKey = validatorKeys_1.ValidatorSecretKey.fromPem(pemText, pemIndex);\n              secretKey.sign(signable);\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](2);\n              throw new errors_1.ErrSignerCannotSign(_context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 7]]);\n      }));\n    }\n  }]);\n  return ValidatorSigner;\n}();\nexports.ValidatorSigner = ValidatorSigner;","map":{"version":3,"sources":["../src/validatorSigner.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,iBAAA,CAAA;AAEA;;AAEG;AAFH,IAGa,eAAe;EAAA,SAAA,gBAAA;IAAA,eAAA,OAAA,eAAA;EAAA;EAAA,YAAA,CAAA,eAAA;IAAA,GAAA;IAAA,KAAA;IACxB;;AAEG;IACG,SAAA,aAAa,OAAe,EAAwC;MAAA,IAAtC,QAAA,GAAA,SAAA,CAAA,MAAA,QAAA,SAAA,QAAA,SAAA,GAAA,SAAA,MAAmB,CAAC;MAAA,IAAE,QAAgB,GAAA,SAAA,CAAA,MAAA,OAAA,SAAA,MAAA,SAAA;;;;;;;cACtE,OAAM,eAAA,CAAA,GAAG,CAAC,eAAe,EAAE;YAAA;cAAA,QAAA,CAAA,IAAA;cAGnB,SAAS,GAAG,eAAA,CAAA,kBAAkB,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,CAAC;cAC7D,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC;cAAC,QAAA,CAAA,IAAA;cAAA;YAAA;cAAA,QAAA,CAAA,IAAA;cAAA,QAAA,CAAA,EAAA,GAAA,QAAA;cAAA,MAEnB,IAAI,QAAA,CAAA,mBAAmB,CAAA,QAAA,CAAA,EAAA,CAAK;YAAA;YAAA;cAAA,OAAA,QAAA,CAAA,IAAA;UAAA;QAAA,GAAA,OAAA;MAAA,CAEzC,EAAA;;EAAA;EAAA,OAAA,eAAA;AAAA;AAbL,OAAA,CAAA,eAAA,GAAA,eAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidatorSigner = void 0;\nconst errors_1 = require(\"./errors\");\nconst validatorKeys_1 = require(\"./validatorKeys\");\n/**\n * Validator signer (BLS signer)\n */\nclass ValidatorSigner {\n    /**\n     * Signs a message.\n     */\n    signUsingPem(pemText, pemIndex = 0, signable) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield validatorKeys_1.BLS.initIfNecessary();\n            try {\n                let secretKey = validatorKeys_1.ValidatorSecretKey.fromPem(pemText, pemIndex);\n                secretKey.sign(signable);\n            }\n            catch (err) {\n                throw new errors_1.ErrSignerCannotSign(err);\n            }\n        });\n    }\n}\nexports.ValidatorSigner = ValidatorSigner;\n//# sourceMappingURL=validatorSigner.js.map"]},"metadata":{},"sourceType":"script"}