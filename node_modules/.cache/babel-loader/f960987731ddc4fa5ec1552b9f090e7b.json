{"ast":null,"code":"import _regeneratorRuntime from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as l } from \"./chunk-KZR7TQ7H.js\";\nimport { c as u } from \"./chunk-YWCHHP5N.js\";\nimport { j as a, m as c } from \"./chunk-HBP5N4FR.js\";\nc();\nimport i from \"axios\";\nvar m = 4,\n  h = 3e4,\n  s = {\n    current: null\n  },\n  r = {\n    current: null\n  },\n  p = l(function (e, n) {\n    return a(void 0, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _yield$i$get, o, _o, t;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return i.get(\"\".concat(e, \"/\").concat(u, \"?from=\").concat(m, \"&size=1&fields=hash,timestamp\").concat(n ? \"&shard=\" + n : \"\"));\n          case 2:\n            _yield$i$get = _context.sent;\n            o = _yield$i$get.data;\n            _o = _slicedToArray(o, 1);\n            t = _o[0];\n            return _context.abrupt(\"return\", t);\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n  });\nfunction T(e, n) {\n  return a(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var o, t;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!(e == null)) {\n            _context2.next = 2;\n            break;\n          }\n          throw new Error(\"missing api url\");\n        case 2:\n          o = Date.now();\n          if (!(s.current != null && o < s.current.timestamp * 1e3 + h)) {\n            _context2.next = 5;\n            break;\n          }\n          return _context2.abrupt(\"return\", s.current);\n        case 5:\n          if (!(r.current != null)) {\n            _context2.next = 9;\n            break;\n          }\n          _context2.next = 8;\n          return r.current;\n        case 8:\n          return _context2.abrupt(\"return\", _context2.sent);\n        case 9:\n          r.current = p(e, n);\n          _context2.prev = 10;\n          _context2.next = 13;\n          return r.current;\n        case 13:\n          t = _context2.sent;\n          if (!(t == null)) {\n            _context2.next = 16;\n            break;\n          }\n          throw r.current = null, new Error(\"could not get block hash\");\n        case 16:\n          return _context2.abrupt(\"return\", (s.current = {\n            hash: t.hash,\n            timestamp: t.timestamp\n          }, r.current = null, t));\n        case 19:\n          _context2.prev = 19;\n          _context2.t0 = _context2[\"catch\"](10);\n          return _context2.abrupt(\"return\", (r.current = null, null));\n        case 22:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[10, 19]]);\n  }));\n}\nexport { T as a };","map":{"version":3,"names":["a","l","c","u","j","m","i","h","s","current","r","p","e","n","_regeneratorRuntime","mark","_callee","_yield$i$get","o","_o","t","wrap","_callee$","_context","prev","next","get","concat","sent","data","_slicedToArray","abrupt","stop","T","_callee2","_callee2$","_context2","Error","Date","now","timestamp","hash","t0"],"sources":["/Users/neville/Documents/Github/elrond-delegation/node_modules/@multiversx/sdk-dapp/__chunks__/chunk-A7U4W5XF.js"],"sourcesContent":["import{a as l}from\"./chunk-KZR7TQ7H.js\";import{c as u}from\"./chunk-YWCHHP5N.js\";import{j as a,m as c}from\"./chunk-HBP5N4FR.js\";c();import i from\"axios\";var m=4,h=3e4,s={current:null},r={current:null},p=l((e,n)=>a(void 0,null,function*(){let{data:o}=yield i.get(`${e}/${u}?from=${m}&size=1&fields=hash,timestamp${n?\"&shard=\"+n:\"\"}`),[t]=o;return t}));function T(e,n){return a(this,null,function*(){if(e==null)throw new Error(\"missing api url\");let o=Date.now();if(s.current!=null&&o<s.current.timestamp*1e3+h)return s.current;if(r.current!=null)return yield r.current;r.current=p(e,n);try{let t=yield r.current;if(t==null)throw r.current=null,new Error(\"could not get block hash\");return s.current={hash:t.hash,timestamp:t.timestamp},r.current=null,t}catch(t){return r.current=null,null}})}export{T as a};\n//# sourceMappingURL=chunk-A7U4W5XF.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}