{"ast":null,"code":"import _defineProperty from\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useGetActiveTransactionsStatus}from'@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';import classNames from'classnames';import{useGlobalContext}from'context';import useTransaction from'helpers/useTransaction';import styles from'./styles.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Switch=function Switch(props){var _classNames2;var transaction=props.transaction,name=props.name;var _useGlobalContext=useGlobalContext(),contractDetails=_useGlobalContext.contractDetails;var _useTransaction=useTransaction(),sendTransaction=_useTransaction.sendTransaction;var _useGetActiveTransact=useGetActiveTransactionsStatus(),pending=_useGetActiveTransact.pending;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),disabled=_useState2[0],setDisabled=_useState2[1];var _useState3=useState(contractDetails.data?contractDetails.data[name]==='ON':false),_useState4=_slicedToArray(_useState3,2),checked=_useState4[0],setChecked=_useState4[1];var _onChange=function onChange(type){setDisabled(true);try{setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return sendTransaction({args:Buffer.from(\"\".concat(!checked)).toString('hex'),value:'0',type:type});case 2:setDisabled(false);case 3:case\"end\":return _context.stop();}},_callee);})),200);}catch(error){console.error(error);}};var trackContractDetails=function trackContractDetails(){if(contractDetails.data){setChecked(contractDetails.data[name]==='ON');}};useEffect(trackContractDetails,[contractDetails.data]);return/*#__PURE__*/_jsxs(\"label\",{className:classNames(styles.switch,_defineProperty({},styles.disabled,disabled||pending),'switch'),children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(){return _onChange(transaction);},type:\"checkbox\",name:name,className:styles.input,defaultChecked:checked}),/*#__PURE__*/_jsx(\"span\",{className:classNames(styles.slider,(_classNames2={},_defineProperty(_classNames2,styles.right,checked),_defineProperty(_classNames2,styles.disabled,pending),_classNames2)),children:['OFF','ON'].map(function(toggle){return/*#__PURE__*/_jsx(\"span\",{className:classNames(styles.label,_defineProperty({},styles.active,checked)),children:toggle},toggle);})})]});};","map":{"version":3,"names":["React","useState","useEffect","useGetActiveTransactionsStatus","classNames","useGlobalContext","useTransaction","styles","jsx","_jsx","jsxs","_jsxs","Switch","props","_classNames2","transaction","name","_useGlobalContext","contractDetails","_useTransaction","sendTransaction","_useGetActiveTransact","pending","_useState","_useState2","_slicedToArray","disabled","setDisabled","_useState3","data","_useState4","checked","setChecked","onChange","type","setTimeout","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","args","Buffer","from","concat","toString","value","stop","error","console","trackContractDetails","className","switch","_defineProperty","children","input","defaultChecked","slider","right","map","toggle","label","active"],"sources":["/Users/neville/Documents/Github/elrond-delegation/src/components/Toggles/components/Switch/Switch.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useGetActiveTransactionsStatus } from '@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';\nimport classNames from 'classnames';\n\nimport { useGlobalContext } from 'context';\nimport useTransaction from 'helpers/useTransaction';\n\nimport styles from './styles.module.scss';\n\nexport interface SwitchPropsType {\n  transaction: string;\n  name: string;\n}\n\nexport const Switch = (props: SwitchPropsType) => {\n  const { transaction, name } = props;\n  const { contractDetails } = useGlobalContext();\n  const { sendTransaction } = useTransaction();\n  const { pending } = useGetActiveTransactionsStatus();\n\n  const [disabled, setDisabled] = useState(false);\n  const [checked, setChecked] = useState(\n    contractDetails.data ? contractDetails.data[name] === 'ON' : false\n  );\n\n  const onChange = (type: string): void => {\n    setDisabled(true);\n\n    try {\n      setTimeout(async (): Promise<void> => {\n        await sendTransaction({\n          args: Buffer.from(`${!checked}`).toString('hex'),\n          value: '0',\n          type\n        });\n\n        setDisabled(false);\n      }, 200);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const trackContractDetails = () => {\n    if (contractDetails.data) {\n      setChecked(contractDetails.data[name] === 'ON');\n    }\n  };\n\n  useEffect(trackContractDetails, [contractDetails.data]);\n\n  return (\n    <label\n      className={classNames(\n        styles.switch,\n        { [styles.disabled]: disabled || pending },\n        'switch'\n      )}\n    >\n      <input\n        onChange={() => onChange(transaction)}\n        type='checkbox'\n        name={name}\n        className={styles.input}\n        defaultChecked={checked}\n      />\n\n      <span\n        className={classNames(styles.slider, {\n          [styles.right]: checked,\n          [styles.disabled]: pending\n        })}\n      >\n        {['OFF', 'ON'].map((toggle) => (\n          <span\n            key={toggle}\n            className={classNames(styles.label, { [styles.active]: checked })}\n          >\n            {toggle}\n          </span>\n        ))}\n      </span>\n    </label>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}