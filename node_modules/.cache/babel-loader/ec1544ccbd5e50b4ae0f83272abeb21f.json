{"ast":null,"code":"import _regeneratorRuntime from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport { a as N } from \"./chunk-B7EZHA3W.js\";\nimport { a as b } from \"./chunk-WWYZM6K6.js\";\nimport { a as w } from \"./chunk-JHW32CXC.js\";\nimport { c as y, d } from \"./chunk-G3PZHPKZ.js\";\nimport { h as L } from \"./chunk-VMWLEDGI.js\";\nimport { h as S } from \"./chunk-7RNOZDML.js\";\nimport { a as P } from \"./chunk-OUEPJKUR.js\";\nimport { e as g } from \"./chunk-3LKAAPJM.js\";\nimport { a as s, j as f, k as A, m as v } from \"./chunk-HBP5N4FR.js\";\nv();\nimport { useRef as R } from \"react\";\nimport { Address as x, SignableMessage as z } from \"@multiversx/sdk-core\";\nP();\nvar B = function B(t, r) {\n    var o;\n    return r ? r === !0 ? t : (o = r.apiAddress) != null ? o : t : null;\n  },\n  Q = function Q(t) {\n    var r = d(S),\n      o = d(L),\n      c = R(o == null ? void 0 : o.loginToken),\n      i = B(r.apiAddress, t),\n      a = b(s(s({}, t === !0 ? {} : t), i ? {\n        apiAddress: i\n      } : {})),\n      C = Boolean(t),\n      k = N(a),\n      _w = w(),\n      T = _w.address,\n      u = y(),\n      M = function M(e) {\n        c.current = e, u(g(s({\n          loginToken: e\n        }, i ? {\n          nativeAuthConfig: a\n        } : {})));\n      },\n      p = function p() {\n        return f(void 0, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return k.initialize();\n              case 3:\n                return _context.abrupt(\"return\", _context.sent);\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n                console.error(\"Unable to get block. Login failed.\", _context.t0);\n                return _context.abrupt(\"return\");\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, null, [[0, 6]]);\n        }));\n      },\n      h = function h(_ref) {\n        var e = _ref.address,\n          l = _ref.signature;\n        var n = c.current;\n        if (!n) throw \"Token not found. Call `setLoginToken` first.\";\n        if (!C) {\n          u(g({\n            loginToken: n,\n            signature: l\n          }));\n          return;\n        }\n        var m = k.getToken({\n          address: e,\n          token: n,\n          signature: l\n        });\n        u(g(s({\n          loginToken: n,\n          signature: l,\n          nativeAuthToken: m\n        }, i ? {\n          nativeAuthConfig: a\n        } : {})));\n      };\n    return {\n      configuration: a,\n      setLoginToken: M,\n      getNativeAuthLoginToken: p,\n      setTokenLoginInfo: h,\n      refreshNativeAuthTokenLogin: function refreshNativeAuthTokenLogin(l) {\n        return f(void 0, [l], function (_ref2) {\n          var e = _ref2.signMessageCallback;\n          return /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n            var n, m, O;\n            return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n              while (1) switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return p();\n                case 2:\n                  n = _context2.sent;\n                  if (!(c.current = n, !n)) {\n                    _context2.next = 5;\n                    break;\n                  }\n                  return _context2.abrupt(\"return\");\n                case 5:\n                  m = new z({\n                    address: new x(T),\n                    message: A.Buffer.from(n)\n                  });\n                  _context2.next = 8;\n                  return e(m, {});\n                case 8:\n                  O = _context2.sent;\n                  h({\n                    address: T,\n                    signature: O.toJSON().signature\n                  });\n                case 10:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }, _callee2);\n          })();\n        });\n      }\n    };\n  };\nexport { Q as a };","map":{"version":3,"names":["a","N","b","w","c","y","d","h","L","S","P","e","g","s","j","f","k","A","m","v","useRef","R","Address","x","SignableMessage","z","B","t","r","o","apiAddress","Q","loginToken","i","C","Boolean","_w","T","address","u","M","current","nativeAuthConfig","p","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","initialize","abrupt","sent","t0","console","error","stop","_ref","l","signature","n","getToken","token","nativeAuthToken","configuration","setLoginToken","getNativeAuthLoginToken","setTokenLoginInfo","refreshNativeAuthTokenLogin","_ref2","signMessageCallback","_callee2","O","_callee2$","_context2","message","Buffer","from","toJSON"],"sources":["/Users/neville/Documents/Github/elrond-delegation/node_modules/@multiversx/sdk-dapp/__chunks__/chunk-XNZGF3PO.js"],"sourcesContent":["import{a as N}from\"./chunk-B7EZHA3W.js\";import{a as b}from\"./chunk-WWYZM6K6.js\";import{a as w}from\"./chunk-JHW32CXC.js\";import{c as y,d}from\"./chunk-G3PZHPKZ.js\";import{h as L}from\"./chunk-VMWLEDGI.js\";import{h as S}from\"./chunk-7RNOZDML.js\";import{a as P}from\"./chunk-OUEPJKUR.js\";import{e as g}from\"./chunk-3LKAAPJM.js\";import{a as s,j as f,k as A,m as v}from\"./chunk-HBP5N4FR.js\";v();import{useRef as R}from\"react\";import{Address as x,SignableMessage as z}from\"@multiversx/sdk-core\";P();var B=(t,r)=>{var o;return r?r===!0?t:(o=r.apiAddress)!=null?o:t:null},Q=t=>{let r=d(S),o=d(L),c=R(o==null?void 0:o.loginToken),i=B(r.apiAddress,t),a=b(s(s({},t===!0?{}:t),i?{apiAddress:i}:{})),C=Boolean(t),k=N(a),{address:T}=w(),u=y(),M=e=>{c.current=e,u(g(s({loginToken:e},i?{nativeAuthConfig:a}:{})))},p=()=>f(void 0,null,function*(){try{return yield k.initialize()}catch(e){console.error(\"Unable to get block. Login failed.\",e);return}}),h=({address:e,signature:l})=>{let n=c.current;if(!n)throw\"Token not found. Call `setLoginToken` first.\";if(!C){u(g({loginToken:n,signature:l}));return}let m=k.getToken({address:e,token:n,signature:l});u(g(s({loginToken:n,signature:l,nativeAuthToken:m},i?{nativeAuthConfig:a}:{})))};return{configuration:a,setLoginToken:M,getNativeAuthLoginToken:p,setTokenLoginInfo:h,refreshNativeAuthTokenLogin:l=>f(void 0,[l],function*({signMessageCallback:e}){let n=yield p();if(c.current=n,!n)return;let m=new z({address:new x(T),message:A.Buffer.from(n)}),O=yield e(m,{});h({address:T,signature:O.toJSON().signature})})}};export{Q as a};\n//# sourceMappingURL=chunk-XNZGF3PO.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}