{"ast":null,"code":"import _defineProperty from\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import React from'react';import{faLock,faGift}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{useGetActiveTransactionsStatus}from'@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';import classNames from'classnames';import{MultiversX}from'assets/MultiversX';import{network}from'config';import{useGlobalContext}from'context';import{denominated}from'helpers/denominate';import{Delegate}from'./components/Delegate';import{Undelegate}from'./components/Undelegate';import useStakeData from'./hooks';import styles from'./styles.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Stake=function Stake(){var _useGetActiveTransact=useGetActiveTransactionsStatus(),pending=_useGetActiveTransact.pending;var _useGlobalContext=useGlobalContext(),userActiveStake=_useGlobalContext.userActiveStake,userClaimableRewards=_useGlobalContext.userClaimableRewards;var _useStakeData=useStakeData(),onRedelegate=_useStakeData.onRedelegate,onClaimRewards=_useStakeData.onClaimRewards;var _isEmpty$isLoading$is={isEmpty:userActiveStake.data==='0'&&userClaimableRewards.data==='0',isLoading:userActiveStake.status==='loading'||userClaimableRewards.status==='loading',isError:userActiveStake.status==='error'||userClaimableRewards.status==='error'},isLoading=_isEmpty$isLoading$is.isLoading,isEmpty=_isEmpty$isLoading$is.isEmpty,isError=_isEmpty$isLoading$is.isError;var panels=[{subicon:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faLock}),color:'#2044F5',title:'Active Delegation',value:denominated(userActiveStake.data||'...',{addCommas:false}),disabled:false,actions:[{render:/*#__PURE__*/_jsx(Undelegate,{}),label:'Undelegate'},{render:/*#__PURE__*/_jsx(Delegate,{}),label:'Delegate'}]},{subicon:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faGift}),color:'#27C180',title:'Claimable Rewards',value:\"+ \".concat(userClaimableRewards.data||'...'),disabled:!userClaimableRewards.data||userClaimableRewards.data==='0',actions:[{transaction:onClaimRewards(function(){return false;}),label:'Claim Now'},{transaction:onRedelegate(function(){return false;}),label:'Redelegate'}]}];return/*#__PURE__*/_jsx(\"div\",{className:classNames(styles.stake,_defineProperty({},styles.empty,isLoading||isError||isEmpty),'stake'),children:isLoading||isError||isEmpty?/*#__PURE__*/_jsxs(\"div\",{className:styles.wrapper,children:[/*#__PURE__*/_jsx(\"strong\",{className:styles.heading,children:\"Welcome to Delegation Dashboard!\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.logo,children:[/*#__PURE__*/_jsx(MultiversX,{}),/*#__PURE__*/_jsx(\"div\",{style:{background:'#2044F5'},className:styles.subicon,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faLock})})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.message,children:isLoading?'Retrieving staking data...':isError?'There was an error trying to retrieve staking data.':\"Currently you don't have any \".concat(network.egldLabel,\" staked.\")}),/*#__PURE__*/_jsx(Delegate,{})]}):panels.map(function(panel,index){return/*#__PURE__*/_jsxs(\"div\",{className:styles.panel,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.icon,children:[/*#__PURE__*/_jsx(MultiversX,{}),index>0&&Array.from({length:4}).map(function(item,iteratee){return/*#__PURE__*/_jsx(\"strong\",{className:classNames(styles.plus,styles[\"plus-\".concat(iteratee+1)]),children:\"+\"},\"plus-\".concat(iteratee));}),/*#__PURE__*/_jsx(\"div\",{style:{background:panel.color},className:styles.subicon,children:panel.subicon})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:panel.title}),/*#__PURE__*/_jsxs(\"strong\",{className:styles.value,children:[panel.value,\" \",network.egldLabel]}),/*#__PURE__*/_jsx(\"div\",{className:styles.actions,children:panel.actions.map(function(action,iteratee){return action.render?/*#__PURE__*/_jsx(\"div\",{children:action.render},action.label):/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{background:iteratee?panel.color:'#303234'},onClick:action.transaction,className:classNames(styles.action,_defineProperty({},styles.disabled,panel.disabled||pending)),children:action.label},action.label);})})]},panel.title);})});};","map":{"version":3,"names":["React","faLock","faGift","FontAwesomeIcon","useGetActiveTransactionsStatus","classNames","MultiversX","network","useGlobalContext","denominated","Delegate","Undelegate","useStakeData","styles","jsx","_jsx","jsxs","_jsxs","Stake","_useGetActiveTransact","pending","_useGlobalContext","userActiveStake","userClaimableRewards","_useStakeData","onRedelegate","onClaimRewards","_isEmpty$isLoading$is","isEmpty","data","isLoading","status","isError","panels","subicon","icon","color","title","value","addCommas","disabled","actions","render","label","concat","transaction","className","stake","_defineProperty","empty","children","wrapper","heading","logo","style","background","message","egldLabel","map","panel","index","Array","from","length","item","iteratee","plus","action","type","onClick"],"sources":["/Users/neville/Documents/Github/elrond-delegation/src/components/Stake/Stake.tsx"],"sourcesContent":["import React, { ReactNode, MouseEvent } from 'react';\nimport { faLock, faGift } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useGetActiveTransactionsStatus } from '@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';\nimport classNames from 'classnames';\n\nimport { MultiversX } from 'assets/MultiversX';\nimport { network } from 'config';\nimport { useGlobalContext } from 'context';\nimport { denominated } from 'helpers/denominate';\n\nimport { Delegate } from './components/Delegate';\nimport { Undelegate } from './components/Undelegate';\n\nimport useStakeData from './hooks';\n\nimport styles from './styles.module.scss';\n\ninterface ActionType {\n  label: string;\n  render?: ReactNode;\n  transaction?: (value: MouseEvent) => Promise<void>;\n}\n\ninterface PanelType {\n  subicon: ReactNode;\n  color: string;\n  title: string;\n  value: string;\n  disabled: boolean;\n  actions: ActionType[];\n}\n\nexport const Stake = () => {\n  const { pending } = useGetActiveTransactionsStatus();\n  const { userActiveStake, userClaimableRewards } = useGlobalContext();\n  const { onRedelegate, onClaimRewards } = useStakeData();\n  const { isLoading, isEmpty, isError } = {\n    isEmpty: userActiveStake.data === '0' && userClaimableRewards.data === '0',\n    isLoading:\n      userActiveStake.status === 'loading' ||\n      userClaimableRewards.status === 'loading',\n    isError:\n      userActiveStake.status === 'error' ||\n      userClaimableRewards.status === 'error'\n  };\n\n  const panels: PanelType[] = [\n    {\n      subicon: <FontAwesomeIcon icon={faLock} />,\n      color: '#2044F5',\n      title: 'Active Delegation',\n      value: denominated(userActiveStake.data || '...', { addCommas: false }),\n      disabled: false,\n      actions: [\n        {\n          render: <Undelegate />,\n          label: 'Undelegate'\n        },\n        {\n          render: <Delegate />,\n          label: 'Delegate'\n        }\n      ]\n    },\n    {\n      subicon: <FontAwesomeIcon icon={faGift} />,\n      color: '#27C180',\n      title: 'Claimable Rewards',\n      value: `+ ${userClaimableRewards.data || '...'}`,\n      disabled: !userClaimableRewards.data || userClaimableRewards.data === '0',\n      actions: [\n        {\n          transaction: onClaimRewards(() => false),\n          label: 'Claim Now'\n        },\n        {\n          transaction: onRedelegate(() => false),\n          label: 'Redelegate'\n        }\n      ]\n    }\n  ];\n\n  return (\n    <div\n      className={classNames(\n        styles.stake,\n        { [styles.empty]: isLoading || isError || isEmpty },\n        'stake'\n      )}\n    >\n      {isLoading || isError || isEmpty ? (\n        <div className={styles.wrapper}>\n          <strong className={styles.heading}>\n            Welcome to Delegation Dashboard!\n          </strong>\n\n          <div className={styles.logo}>\n            <MultiversX />\n\n            <div style={{ background: '#2044F5' }} className={styles.subicon}>\n              <FontAwesomeIcon icon={faLock} />\n            </div>\n          </div>\n\n          <div className={styles.message}>\n            {isLoading\n              ? 'Retrieving staking data...'\n              : isError\n              ? 'There was an error trying to retrieve staking data.'\n              : `Currently you don't have any ${network.egldLabel} staked.`}\n          </div>\n\n          <Delegate />\n        </div>\n      ) : (\n        panels.map((panel, index) => (\n          <div key={panel.title} className={styles.panel}>\n            <div className={styles.icon}>\n              <MultiversX />\n\n              {index > 0 &&\n                Array.from({ length: 4 }).map((item, iteratee) => (\n                  <strong\n                    key={`plus-${iteratee}`}\n                    className={classNames(\n                      styles.plus,\n                      styles[`plus-${iteratee + 1}`]\n                    )}\n                  >\n                    +\n                  </strong>\n                ))}\n\n              <div\n                style={{ background: panel.color }}\n                className={styles.subicon}\n              >\n                {panel.subicon}\n              </div>\n            </div>\n\n            <div className={styles.title}>{panel.title}</div>\n\n            <strong className={styles.value}>\n              {panel.value} {network.egldLabel}\n            </strong>\n\n            <div className={styles.actions}>\n              {panel.actions.map((action, iteratee) =>\n                action.render ? (\n                  <div key={action.label}>{action.render}</div>\n                ) : (\n                  <button\n                    key={action.label}\n                    type='button'\n                    style={{ background: iteratee ? panel.color : '#303234' }}\n                    onClick={action.transaction}\n                    className={classNames(styles.action, {\n                      [styles.disabled]: panel.disabled || pending\n                    })}\n                  >\n                    {action.label}\n                  </button>\n                )\n              )}\n            </div>\n          </div>\n        ))\n      )}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}