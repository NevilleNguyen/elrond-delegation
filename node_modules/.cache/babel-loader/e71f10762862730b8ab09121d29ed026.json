{"ast":null,"code":"import _defineProperty from\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useGetActiveTransactionsStatus}from'@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';import classNames from'classnames';import{Formik}from'formik';import{object}from'yup';import{Action,Submit}from'components/Action';import{undelegateValidator}from'components/Stake//helpers/delegationValidators';import useStakeData from'components/Stake/hooks';import{network}from'config';import{useGlobalContext}from'context';import{denominated}from'helpers/denominate';import styles from'./styles.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Undelegate=function Undelegate(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),maxed=_useState2[0],setMaxed=_useState2[1];var _useGlobalContext=useGlobalContext(),userActiveStake=_useGlobalContext.userActiveStake;var _useStakeData=useStakeData(),onUndelegate=_useStakeData.onUndelegate;var _useGetActiveTransact=useGetActiveTransactionsStatus(),pending=_useGetActiveTransact.pending;return/*#__PURE__*/_jsx(\"div\",{className:classNames(styles.wrapper,'undelegate-wrapper'),children:/*#__PURE__*/_jsx(Action,{title:\"Undelegate Now\",description:\"Select the amount of \".concat(network.egldLabel,\" you want to undelegate.\"),disabled:pending,trigger:/*#__PURE__*/_jsx(\"div\",{className:classNames(styles.trigger,_defineProperty({},styles.disabled,pending)),children:\"Undelegate\"}),render:function render(callback){return/*#__PURE__*/_jsx(\"div\",{className:styles.undelegate,children:/*#__PURE__*/_jsx(Formik,{validationSchema:object().shape({amount:undelegateValidator(userActiveStake.data||'')}),onSubmit:onUndelegate(callback),initialValues:{amount:'0'},children:function children(_ref){var errors=_ref.errors,values=_ref.values,touched=_ref.touched,handleChange=_ref.handleChange,handleBlur=_ref.handleBlur,handleSubmit=_ref.handleSubmit,setFieldValue=_ref.setFieldValue;var amount=denominated(userActiveStake.data||'',{addCommas:false,showLastNonZeroDecimal:true});var onChange=function onChange(event){handleChange(event);setMaxed(false);};var onMax=function onMax(event){event.preventDefault();setMaxed(true);setFieldValue('amount',amount);};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.field,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"amount\",children:[network.egldLabel,\" Amount\"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.group,children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",step:\"any\",required:true,autoComplete:\"off\",min:0,value:maxed?amount:values.amount,onBlur:handleBlur,onChange:onChange,className:classNames(styles.input,_defineProperty({},styles.invalid,errors.amount&&touched.amount))}),/*#__PURE__*/_jsx(\"a\",{href:\"/#\",onClick:onMax,className:styles.max,children:\"Max\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:styles.description,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Balance:\"}),' ',denominated(userActiveStake.data||''),' ',network.egldLabel]}),errors.amount&&touched.amount&&/*#__PURE__*/_jsx(\"span\",{className:styles.error,children:errors.amount})]}),/*#__PURE__*/_jsx(Submit,{save:\"Continue\",onClose:function onClose(){setMaxed(false);setFieldValue('amount','0');}})]});}})});}})});};","map":{"version":3,"names":["React","useState","useGetActiveTransactionsStatus","classNames","Formik","object","Action","Submit","undelegateValidator","useStakeData","network","useGlobalContext","denominated","styles","jsx","_jsx","jsxs","_jsxs","Undelegate","_useState","_useState2","_slicedToArray","maxed","setMaxed","_useGlobalContext","userActiveStake","_useStakeData","onUndelegate","_useGetActiveTransact","pending","className","wrapper","children","title","description","concat","egldLabel","disabled","trigger","_defineProperty","render","callback","undelegate","validationSchema","shape","amount","data","onSubmit","initialValues","_ref","errors","values","touched","handleChange","handleBlur","handleSubmit","setFieldValue","addCommas","showLastNonZeroDecimal","onChange","event","onMax","preventDefault","field","htmlFor","group","type","name","step","required","autoComplete","min","value","onBlur","input","invalid","href","onClick","max","error","save","onClose"],"sources":["/Users/neville/Documents/Github/elrond-delegation/src/components/Stake/components/Undelegate/Undelegate.tsx"],"sourcesContent":["import React, { ChangeEvent, MouseEvent, useState } from 'react';\n\nimport { useGetActiveTransactionsStatus } from '@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';\nimport classNames from 'classnames';\nimport { Formik } from 'formik';\nimport { object } from 'yup';\nimport { Action, Submit } from 'components/Action';\nimport { undelegateValidator } from 'components/Stake//helpers/delegationValidators';\nimport useStakeData, { ActionCallbackType } from 'components/Stake/hooks';\nimport { network } from 'config';\nimport { useGlobalContext } from 'context';\n\nimport { denominated } from 'helpers/denominate';\n\nimport styles from './styles.module.scss';\n\nexport const Undelegate = () => {\n  const [maxed, setMaxed] = useState(false);\n\n  const { userActiveStake } = useGlobalContext();\n  const { onUndelegate } = useStakeData();\n  const { pending } = useGetActiveTransactionsStatus();\n\n  return (\n    <div className={classNames(styles.wrapper, 'undelegate-wrapper')}>\n      <Action\n        title='Undelegate Now'\n        description={`Select the amount of ${network.egldLabel} you want to undelegate.`}\n        disabled={pending}\n        trigger={\n          <div\n            className={classNames(styles.trigger, {\n              [styles.disabled]: pending\n            })}\n          >\n            Undelegate\n          </div>\n        }\n        render={(callback: ActionCallbackType) => (\n          <div className={styles.undelegate}>\n            <Formik\n              validationSchema={object().shape({\n                amount: undelegateValidator(userActiveStake.data || '')\n              })}\n              onSubmit={onUndelegate(callback)}\n              initialValues={{\n                amount: '0'\n              }}\n            >\n              {({\n                errors,\n                values,\n                touched,\n                handleChange,\n                handleBlur,\n                handleSubmit,\n                setFieldValue\n              }) => {\n                const amount = denominated(userActiveStake.data || '', {\n                  addCommas: false,\n                  showLastNonZeroDecimal: true\n                });\n\n                const onChange = (\n                  event: ChangeEvent<HTMLInputElement>\n                ): void => {\n                  handleChange(event);\n                  setMaxed(false);\n                };\n\n                const onMax = (event: MouseEvent): void => {\n                  event.preventDefault();\n                  setMaxed(true);\n                  setFieldValue('amount', amount);\n                };\n\n                return (\n                  <form onSubmit={handleSubmit}>\n                    <div className={styles.field}>\n                      <label htmlFor='amount'>{network.egldLabel} Amount</label>\n                      <div className={styles.group}>\n                        <input\n                          type='number'\n                          name='amount'\n                          step='any'\n                          required={true}\n                          autoComplete='off'\n                          min={0}\n                          value={maxed ? amount : values.amount}\n                          onBlur={handleBlur}\n                          onChange={onChange}\n                          className={classNames(styles.input, {\n                            [styles.invalid]: errors.amount && touched.amount\n                          })}\n                        />\n\n                        <a href='/#' onClick={onMax} className={styles.max}>\n                          Max\n                        </a>\n                      </div>\n\n                      <span className={styles.description}>\n                        <span>Balance:</span>{' '}\n                        {denominated(userActiveStake.data || '')}{' '}\n                        {network.egldLabel}\n                      </span>\n\n                      {errors.amount && touched.amount && (\n                        <span className={styles.error}>{errors.amount}</span>\n                      )}\n                    </div>\n\n                    <Submit\n                      save='Continue'\n                      onClose={() => {\n                        setMaxed(false);\n                        setFieldValue('amount', '0');\n                      }}\n                    />\n                  </form>\n                );\n              }}\n            </Formik>\n          </div>\n        )}\n      />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}