{"ast":null,"code":"import _defineProperty from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/neville/Documents/Github/elrond-delegation/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/neville/Documents/Github/elrond-delegation/src/components/Toggles/components/Switch/Switch.tsx\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useGetActiveTransactionsStatus } from '@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';\nimport classNames from 'classnames';\nimport { useGlobalContext } from 'context';\nimport useTransaction from 'helpers/useTransaction';\nimport styles from './styles.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var Switch = function Switch(props) {\n  _s();\n  var _classNames2;\n  var transaction = props.transaction,\n    name = props.name;\n  var _useGlobalContext = useGlobalContext(),\n    contractDetails = _useGlobalContext.contractDetails;\n  var _useTransaction = useTransaction(),\n    sendTransaction = _useTransaction.sendTransaction;\n  var _useGetActiveTransact = useGetActiveTransactionsStatus(),\n    pending = _useGetActiveTransact.pending;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    disabled = _useState2[0],\n    setDisabled = _useState2[1];\n  var _useState3 = useState(contractDetails.data ? contractDetails.data[name] === 'ON' : false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    checked = _useState4[0],\n    setChecked = _useState4[1];\n  var _onChange = function onChange(type) {\n    setDisabled(true);\n    try {\n      setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return sendTransaction({\n                args: Buffer.from(\"\".concat(!checked)).toString('hex'),\n                value: '0',\n                type: type\n              });\n            case 2:\n              setDisabled(false);\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      })), 200);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  var trackContractDetails = function trackContractDetails() {\n    if (contractDetails.data) {\n      setChecked(contractDetails.data[name] === 'ON');\n    }\n  };\n  useEffect(trackContractDetails, [contractDetails.data]);\n  return /*#__PURE__*/_jsxDEV(\"label\", {\n    className: classNames(styles.switch, _defineProperty({}, styles.disabled, disabled || pending), 'switch'),\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: function onChange() {\n        return _onChange(transaction);\n      },\n      type: \"checkbox\",\n      name: name,\n      className: styles.input,\n      defaultChecked: checked\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: classNames(styles.slider, (_classNames2 = {}, _defineProperty(_classNames2, styles.right, checked), _defineProperty(_classNames2, styles.disabled, pending), _classNames2)),\n      children: ['OFF', 'ON'].map(function (toggle) {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: classNames(styles.label, _defineProperty({}, styles.active, checked)),\n          children: toggle\n        }, toggle, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, _this);\n};\n_s(Switch, \"IujuFvkaOzXkigFLoTGhXZRWCLY=\", false, function () {\n  return [useGlobalContext, useTransaction, useGetActiveTransactionsStatus];\n});\n_c = Switch;\nvar _c;\n$RefreshReg$(_c, \"Switch\");","map":{"version":3,"names":["React","useState","useEffect","useGetActiveTransactionsStatus","classNames","useGlobalContext","useTransaction","styles","jsxDEV","_jsxDEV","Switch","props","_s","_classNames2","transaction","name","_useGlobalContext","contractDetails","_useTransaction","sendTransaction","_useGetActiveTransact","pending","_useState","_useState2","_slicedToArray","disabled","setDisabled","_useState3","data","_useState4","checked","setChecked","onChange","type","setTimeout","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","args","Buffer","from","concat","toString","value","stop","error","console","trackContractDetails","className","switch","_defineProperty","children","input","defaultChecked","fileName","_jsxFileName","lineNumber","columnNumber","_this","slider","right","map","toggle","label","active","_c","$RefreshReg$"],"sources":["/Users/neville/Documents/Github/elrond-delegation/src/components/Toggles/components/Switch/Switch.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useGetActiveTransactionsStatus } from '@multiversx/sdk-dapp/hooks/transactions/useGetActiveTransactionsStatus';\nimport classNames from 'classnames';\n\nimport { useGlobalContext } from 'context';\nimport useTransaction from 'helpers/useTransaction';\n\nimport styles from './styles.module.scss';\n\nexport interface SwitchPropsType {\n  transaction: string;\n  name: string;\n}\n\nexport const Switch = (props: SwitchPropsType) => {\n  const { transaction, name } = props;\n  const { contractDetails } = useGlobalContext();\n  const { sendTransaction } = useTransaction();\n  const { pending } = useGetActiveTransactionsStatus();\n\n  const [disabled, setDisabled] = useState(false);\n  const [checked, setChecked] = useState(\n    contractDetails.data ? contractDetails.data[name] === 'ON' : false\n  );\n\n  const onChange = (type: string): void => {\n    setDisabled(true);\n\n    try {\n      setTimeout(async (): Promise<void> => {\n        await sendTransaction({\n          args: Buffer.from(`${!checked}`).toString('hex'),\n          value: '0',\n          type\n        });\n\n        setDisabled(false);\n      }, 200);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const trackContractDetails = () => {\n    if (contractDetails.data) {\n      setChecked(contractDetails.data[name] === 'ON');\n    }\n  };\n\n  useEffect(trackContractDetails, [contractDetails.data]);\n\n  return (\n    <label\n      className={classNames(\n        styles.switch,\n        { [styles.disabled]: disabled || pending },\n        'switch'\n      )}\n    >\n      <input\n        onChange={() => onChange(transaction)}\n        type='checkbox'\n        name={name}\n        className={styles.input}\n        defaultChecked={checked}\n      />\n\n      <span\n        className={classNames(styles.slider, {\n          [styles.right]: checked,\n          [styles.disabled]: pending\n        })}\n      >\n        {['OFF', 'ON'].map((toggle) => (\n          <span\n            key={toggle}\n            className={classNames(styles.label, { [styles.active]: checked })}\n          >\n            {toggle}\n          </span>\n        ))}\n      </span>\n    </label>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}